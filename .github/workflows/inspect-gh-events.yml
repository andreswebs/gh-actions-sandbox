---
name: Inspect GitHub events

permissions:
  id-token: write
  contents: read

on:
  workflow_dispatch: {}
  pull_request: {}
  push:
    branches:
      - main
    tags:
      - "**"

jobs:
  inspect:
    name: Inspect event payload
    runs-on: ubuntu-latest
    steps:
      - name: Print event JSON
        run: |
          if [ -n "${GITHUB_EVENT_PATH}" ] && [ -f "${GITHUB_EVENT_PATH}" ]; then
            echo "GITHUB_EVENT_PATH=${GITHUB_EVENT_PATH}"
            echo "--- Raw event ---"
            if command -v jq >/dev/null 2>&1; then
              jq . "${GITHUB_EVENT_PATH}"
            else
              cat "${GITHUB_EVENT_PATH}"
            fi
          else
            echo "No GITHUB_EVENT_PATH file found
          fi
